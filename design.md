# 設計のメモ書き

## Java上のソフトウェアの状態

Javaマシンは以下の状態を持つものとする

- 変数
- インスタンス(とそれに付随する属性)

ファイルシステムやOSが持つ状態(e.g. 時刻, ファイルツリー, 外部ファイル, socket通信)を参照する動作はサポートしない

## ブロック

Java言語上のコードブロックは以下のものに付随するプログラムの列とする

- if文
- for文
- while文
- switch文

TimerTaskなど、タスクを定義するブロックはサポートしない

## ブロックの入力と出力

ブロック内で参照または書き込みが行われている変数/オブジェクトをブロックの入力、出力、状態の3タイプに分ける

aの参照の例
```
b = a;
a.fooMethod(fooarg);
fooObject.barMethod(a);
```

aの書き込みの例
```
a = b;
a.fooMethod(fooarg);
```

### 入力

ブロックの入力は、ブロック内で使用される変数/オブジェクトのうち、書き込みが行われる前に参照が行われる変数/オブジェクトの集合である

### 出力

ブロックの出力は、ブロック内で使用される変数/オブジェクトのうち、参照が行われる前に書き込みが行われる変数/オブジェクトの集合である

### 状態

ブロックの状態は、ブロック内で使用される変数/オブジェクトのうち、ブロック内で定義されている、またはブロック内でのみ使用されている変数である

### 例1

```Java
for(int i = 0; i < arraysize; i++){
    System.out.print(String.valueOf(A[i]));
    if(i < arraysize - 1) System.out.print(", ");
}
```
上の例では
- 入力: `[arraysize, A]`
- 出力: `[]`
- 状態: `[i]`

### 例2

```Java
for(int j = 0; j < arraysize; j++){
    for(int i = 0; i < arraysize - 1; i++){
        if(A[i] > A[i + 1]){
            int tmp = A[i];
            A[i + 1] = A[i]; // 正しくはA[i] = A[i + 1];
            A[i] = tmp;      // 正しくはA[i + 1] = tmp;
        }
    }
}
```
上の例では
- 入力: `[arraysize, A]`
- 出力: `[A]`
- 状態: `[i, j, tmp]`

